<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Attitude Scores - MTsT Daarut Tahfizh Al-Ikhlas</title>
  <meta name="description" content="Personal Attitude Scores Analysis - English Language">
  <meta name="author" content="Ahmad Zaman Huri, S.Pd.">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      /* Palette */
      --primary:#234626; --primary-dark:#1A351D; --accent-gold:#D4AF37;
      --neutral-white:#FFFFFF; --neutral-light:#F9FAFB; --neutral-gray:#E5E7EB; --neutral-dark:#374151;
      --success:#16A34A; --danger:#DC2626; --attitude-bg:rgba(22,163,74,.10);
      --border-success:#14532D; --border-class:#0D1F11;

      /* Type */
      --font-family:'Inter',system-ui,sans-serif;
      --font-size-xs:.75rem; --font-size-sm:.875rem; --font-size-base:1rem; --font-size-lg:1.0625rem; --font-size-xl:1.25rem; --font-size-2xl:1.35rem;

      /* Spacing (padat) */
      --space-1:.25rem; --space-2:.5rem; --space-3:.65rem; --space-4:.85rem; --space-6:1.1rem;

      /* Radius & shadow */
      --radius-sm:.35rem; --radius-md:.5rem; --radius-lg:1rem;
      --shadow-sm:0 1px 2px rgba(0,0,0,.04); --shadow-md:0 2px 6px rgba(0,0,0,.08); --shadow-badge:0 1px 1px rgba(0,0,0,.06); --shadow-modal:0 8px 16px rgba(0,0,0,.15);

      --transition:all .2s ease;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:var(--font-family);background:var(--neutral-light);color:var(--neutral-dark);min-height:100vh;line-height:1.5;-webkit-font-smoothing:antialiased}
    .container{max-width:1100px;margin:0 auto;padding:var(--space-2) var(--space-3)}

    /* Header (pola konsisten) */
    .header{
      background:var(--primary);color:#fff;padding:var(--space-4);text-align:center;border-bottom:3px solid var(--accent-gold);
      border-radius:0 0 var(--radius-md) var(--radius-md);
    }
    .header .back-nav{text-align:left;margin-bottom:var(--space-2)}
    .back-btn{
      display:inline-flex;align-items:center;gap:var(--space-2);color:#fff;text-decoration:none;font-weight:600;
      font-size:var(--font-size-xs);padding:var(--space-1) var(--space-2);border-radius:var(--radius-sm);background:var(--primary-dark);
      border:1px solid rgba(255,255,255,.1)
    }
    .back-btn:hover{background:var(--accent-gold);color:var(--primary)}
    .title{display:flex;align-items:center;justify-content:center;gap:var(--space-2)}
    .title i{font-size:var(--font-size-xl)}
    .header h1{font-size:var(--font-size-2xl);font-weight:700}
    .header .info{font-size:var(--font-size-xs);opacity:.95;max-width:700px;margin:var(--space-2) auto 0}
    .header .info span{display:inline-block;margin:0 var(--space-2)}

    /* Stats (padat) */
    .stats-section{padding:var(--space-3) 0}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:var(--space-3)}
    .stat-card{background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:var(--space-3);display:flex;align-items:center;gap:var(--space-2);border:1px solid #F1F5F9}
    .stat-icon{width:36px;height:36px;background:var(--primary);border-radius:.5rem;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.95rem}
    .stat-content .stat-number{font-size:var(--font-size-lg);font-weight:700;color:var(--primary)}
    .stat-content .stat-label{font-size:var(--font-size-xs);opacity:.9}

    /* Filters */
    .filters-section{padding:var(--space-3);background:#fff;border-radius:var(--radius-md);margin:var(--space-3) 0;box-shadow:var(--shadow-sm);border:1px solid #F1F5F9}
    .filters-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--space-2);align-items:center}
    .filter-select,.filter-btn{padding:var(--space-2) var(--space-2);border:1px solid var(--neutral-gray);border-radius:var(--radius-sm);font-size:var(--font-size-sm);background:#fff;transition:var(--transition)}
    .filter-select:focus{outline:none;border-color:var(--primary)}
    .filter-btn{background:var(--primary);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;gap:var(--space-2);font-weight:600}
    .filter-btn:hover{background:var(--primary-dark)}

    /* Table */
    .data-section{padding:var(--space-2) 0;overflow-x:auto}
    .table-container{background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-md);border:1px solid #EEF2F7}
    table{width:100%;border-collapse:collapse;min-width:900px}
    thead{background:var(--primary);color:#fff;position:sticky;top:0;z-index:1}
    th{padding:var(--space-3);font-weight:700;font-size:var(--font-size-sm);text-align:center}
    th.attitude{width:120px}
    td{padding:var(--space-2) var(--space-3);border-bottom:1px solid var(--neutral-gray);font-size:var(--font-size-sm);text-align:center}
    td.attitude{background:var(--attitude-bg);cursor:pointer}
    td.attitude:hover{background:rgba(22,163,74,.2)}
    tbody tr:last-child td{border-bottom:none}
    tbody tr:hover{background:rgba(35,70,38,.08);transition:var(--transition)}
    .sikap-kehidupan + .sikap-spiritual,.sikap-spiritual + .sikap-sosial,.sikap-sosial + .keterangan{border-left:3px solid var(--primary-dark)}

    /* Badges */
    .class-badge{padding:var(--space-1) var(--space-2);border-radius:var(--radius-lg);font-size:var(--font-size-xs);font-weight:600;display:inline-block;text-align:center;box-shadow:var(--shadow-badge);background:var(--primary-dark);color:#fff;min-width:46px;border:1px solid var(--border-class)}

    /* States */
    .loading-cell{text-align:center;padding:var(--space-6);color:var(--neutral-dark)}
    .loading-spinner{width:22px;height:22px;border:3px solid var(--neutral-gray);border-top:3px solid var(--primary);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto var(--space-2)}
    @keyframes spin{to{transform:rotate(360deg)}}
    .error-cell{text-align:center;padding:var(--space-6);color:var(--danger)}
    .error-cell i{font-size:var(--font-size-base);margin-bottom:var(--space-2);display:block}
    .no-data{text-align:center;padding:var(--space-6);color:var(--neutral-dark)}

    /* Legend */
    .legend-section{background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:var(--space-3);margin-top:var(--space-3);font-size:var(--font-size-sm);color:var(--neutral-dark);border:1px solid #F1F5F9}
    .toggle-btn{background:var(--primary);color:#fff;border:none;padding:var(--space-2) var(--space-3);border-radius:var(--radius-sm);cursor:pointer;font-size:var(--font-size-sm);font-weight:600;display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-3)}
    .toggle-btn:hover{background:var(--primary-dark)}
    .legend-content{display:none;padding:var(--space-2);border-left:3px solid var(--primary)}
    .legend-content.active{display:block}
    .legend-content ul{list-style:none;margin:var(--space-2) 0}
    .legend-content li{margin-bottom:var(--space-1)}
    .legend-content h4{font-size:var(--font-size-sm);font-weight:700;margin-bottom:var(--space-2);color:var(--primary)}

    /* Modal */
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);align-items:center;justify-content:center;z-index:1000}
    .modal-content{background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-modal);padding:var(--space-4);max-width:500px;width:90%;max-height:80vh;overflow-y:auto;border-top:4px solid var(--primary)}
    .modal-header{display:flex;flex-direction:column;gap:var(--space-1);margin-bottom:var(--space-3);padding-bottom:var(--space-2);border-bottom:1px solid var(--neutral-gray)}
    .modal-header h3{font-size:var(--font-size-lg);font-weight:700;color:var(--primary);margin:0}
    .modal-header .modal-subtitle{font-size:var(--font-size-sm);color:var(--neutral-dark);font-weight:500}
    .modal-close{position:absolute;top:var(--space-3);right:var(--space-3);background:var(--neutral-gray);border:none;border-radius:var(--radius-sm);width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:var(--font-size-sm);color:var(--neutral-dark);cursor:pointer}
    .modal-close:hover{background:var(--primary);color:#fff}
    .modal-body ul{list-style:none;margin:0}
    .modal-body li{margin-bottom:var(--space-2);padding:var(--space-2);background:var(--attitude-bg);border-radius:var(--radius-sm);font-size:var(--font-size-sm);color:var(--neutral-dark)}

    /* Footer (ringkas & konsisten) */
    .footer{background:var(--primary-dark);color:#fff;text-align:center;padding:var(--space-3);margin-top:var(--space-3);border-radius:var(--radius-md);font-size:var(--font-size-xs)}
    .footer .brand{font-size:var(--font-size-sm);font-weight:700}
    .footer .info{opacity:.9;margin-top:var(--space-1)}

    /* Responsive */
    @media (max-width:768px){
      .container{padding:var(--space-2)}
      .filters-grid,.stats-grid{grid-template-columns:1fr}
      .header h1{font-size:var(--font-size-xl)}
      .header .info{font-size:var(--font-size-xs)}
      .stat-card{padding:var(--space-2)}
      .stat-icon{width:32px;height:32px;font-size:.85rem}
      .stat-content .stat-number{font-size:var(--font-size-base)}
      th,td{padding:var(--space-2) var(--space-1);font-size:var(--font-size-xs)}
      th.attitude,td.attitude{width:80px}
      .class-badge{padding:var(--space-1) var(--space-1);min-width:35px}
      .modal-content{width:95%;padding:var(--space-3)}
    }
    @media (max-width:480px){
      .back-btn{padding:var(--space-1) var(--space-2);font-size:var(--font-size-xs)}
      .title i{font-size:var(--font-size-base)}
      .header h1{font-size:var(--font-size-lg)}
      th.attitude,td.attitude{width:60px}
    }

    /* Row tint */
    tr.kelas-8A{background:rgba(35,70,38,.04)}
    tr.kelas-8B{background:rgba(212,175,55,.05)}
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="back-nav">
        <!-- ABSOLUTE URL seperti halaman lain -->
        <a href="https://azhibnmjkfr.github.io/english-scores-system/" class="back-btn">
          <i class="fas fa-arrow-left"></i><span>Back to Dashboard</span>
        </a>
      </div>
      <div class="title">
        <i class="fas fa-smile"></i>
        <h1>Personal Attitude Scores</h1>
      </div>
      <div class="info">
        <span><strong>Guru:</strong> Ahmad Zaman Huri, S.Pd.</span>
        <span><strong>Sekolah:</strong> MTsT Daarut Tahfizh Al-Ikhlas</span>
        <span><strong>Pelajaran:</strong> Bahasa Inggris</span>
      </div>
    </header>

    <!-- Statistics Cards -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-users"></i></div>
          <div class="stat-content">
            <div class="stat-number" id="totalStudents">-</div>
            <div class="stat-label">Total Students</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-list"></i></div>
          <div class="stat-content">
            <div class="stat-number" id="totalAttitudes">-</div>
            <div class="stat-label">Total Attitudes Recorded</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-clock"></i></div>
          <div class="stat-content">
            <div class="stat-number" id="lastUpdate">-</div>
            <div class="stat-label">Last Update</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Filters -->
    <section class="filters-section">
      <div class="filters-grid">
        <select id="filterClass" class="filter-select">
          <option value="">Semua Kelas</option>
        </select>
        <button id="resetFilters" class="filter-btn">
          <i class="fas fa-redo"></i> Reset
        </button>
      </div>
    </section>

    <!-- Data Table -->
    <section class="data-section">
      <div class="table-container">
        <table id="nilaiTable">
          <thead>
            <tr>
              <th>No</th>
              <th>Student Code</th>
              <th>Student Name</th>
              <th>Class</th>
              <th class="attitude">Sikap Kehidupan</th>
              <th class="attitude">Sikap Spiritual</th>
              <th class="attitude">Sikap Sosial</th>
              <th>Keterangan</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <tr><td colspan="8" class="loading-cell">
              <div class="loading-spinner"></div>
              Memuat data...
            </td></tr>
          </tbody>
        </table>
      </div>

      <!-- Legend -->
      <div class="legend-section">
        <button class="toggle-btn" id="toggleLegend">
          <i class="fas fa-info-circle"></i> Lihat Keterangan Butir Sikap
        </button>
        <div class="legend-content" id="legendContent">
          <h4>Butir A – Sikap Pendidikan Kehidupan</h4>
          <ul>
            <li>1. Kebersihan/Kerapian</li><li>2. Ketekunan/Ketelitian</li><li>3. Tanggung Jawab Lingkungan</li>
            <li>4. Berpikir Kritis</li><li>5. Toleransi</li><li>6. Leadership</li><li>7. Keberanian</li>
            <li>8. Nasionalisme</li><li>9. Kreativitas/Inovasi</li>
          </ul>
          <h4>Butir B – Sikap Spiritual</h4>
          <ul>
            <li>1. Bersyukur</li><li>2. Sholat Berjama'ah</li><li>3. Berdoa Memulai Kegiatan</li><li>4. Mengucapkan Salam</li><li>5. Suka Membaca Al-Qur'an</li>
          </ul>
          <h4>Butir C – Sikap Sosial</h4>
          <ul>
            <li>1. Jujur</li><li>2. Disiplin</li><li>3. Empati/Kasih Sayang</li><li>4. Tanggung Jawab</li><li>5. Kerja Sama</li><li>6. Rasa Hormat</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Modal -->
    <div class="modal" id="attitudeModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Keterangan Sikap</h3>
          <span class="modal-subtitle" id="modalSubtitle"></span>
          <button class="modal-close" id="modalClose"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body"><ul id="modalList"></ul></div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="brand">English Scores System</div>
      <div class="info">Developed by Ahmad Zaman Huri, S.Pd.</div>
    </footer>
  </div>

  <script>
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/1N-docAeezSqzkQcTk8mcPm-qMf-EisMELs_N35zAaT8/gviz/tq?tqx=out:csv&sheet=%F0%9F%98%8A%20personal_attitude";
    const filterClass = document.getElementById("filterClass");
    const resetBtn = document.getElementById("resetFilters");
    const tableBody = document.getElementById("tableBody");
    const totalStudents = document.getElementById("totalStudents");
    const totalAttitudes = document.getElementById("totalAttitudes");
    const lastUpdate = document.getElementById("lastUpdate");
    const toggleLegend = document.getElementById("toggleLegend");
    const legendContent = document.getElementById("legendContent");
    const attitudeModal = document.getElementById("attitudeModal");
    const modalTitle = document.getElementById("modalTitle");
    const modalSubtitle = document.getElementById("modalSubtitle");
    const modalList = document.getElementById("modalList");
    const modalClose = document.getElementById("modalClose");
    let allData = [];

    function parseCSV(csvText) {
      const rows = []; let currentRow = []; let inQuotes = false; let currentValue = "";
      for (let i=0;i<csvText.length;i++){
        const char=csvText[i], nextChar=csvText[i+1];
        if(char==='"'){inQuotes=!inQuotes}
        else if(char===',' && !inQuotes){currentRow.push(currentValue.trim()); currentValue=""}
        else if(char=== '\n' && !inQuotes){currentRow.push(currentValue.trim()); rows.push(currentRow); currentRow=[]; currentValue=""}
        else if(char=== '\r' && nextChar=== '\n' && !inQuotes){currentRow.push(currentValue.trim()); rows.push(currentRow); currentRow=[]; currentValue=""; i++}
        else{currentValue+=char}
      }
      if(currentValue.trim()!=="" || currentRow.length>0){currentRow.push(currentValue.trim()); rows.push(currentRow)}
      return rows;
    }

    const attitudeMaps = {
      kehidupan:{'1':'Kebersihan/Kerapian','2':'Ketekunan/Ketelitian','3':'Tanggung Jawab Lingkungan','4':'Berpikir Kritis','5':'Toleransi','6':'Leadership','7':'Keberanian','8':'Nasionalisme','9':'Kreativitas/Inovasi'},
      spiritual:{'1':'Bersyukur','2':'Sholat Berjama\'ah','3':'Berdoa Memulai Kegiatan','4':'Mengucapkan Salam','5':'Suka Membaca Al-Qur\'an'},
      sosial:{'1':'Jujur','2':'Disiplin','3':'Empati/Kasih Sayang','4':'Tanggung Jawab','5':'Kerja Sama','6':'Rasa Hormat'}
    };

    function formatAttitude(numbers,type){
      if(!numbers || numbers.trim()==='-' || numbers.trim()==='') return '-';
      const nums=numbers.split(',').map(n=>n.trim()).filter(n=>n);
      return nums.length>0 ? nums.join(', ') : '-';
    }

    function showModal(numbers,type,studentName,className){
      if(!numbers || numbers.trim()==='-' || numbers.trim()===''){
        modalList.innerHTML='<li>Tidak ada data sikap.</li>';
      }else{
        const nums=numbers.split(',').map(n=>n.trim()).filter(n=>n);
        const labels=nums.map(n=>attitudeMaps[type][n]||n).filter(Boolean);
        modalList.innerHTML=labels.length?labels.map(l=>`<li>${l}</li>`).join(''):'<li>Tidak ada data sikap.</li>';
      }
      modalTitle.textContent=`Sikap ${type.charAt(0).toUpperCase()+type.slice(1)} - ${studentName}`;
      modalSubtitle.textContent=`Kelas: ${className}`;
      attitudeModal.style.display='flex';
    }

    async function loadData(){
      try{
        const response=await fetch(SHEET_URL);
        if(!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        const csvText=await response.text();
        const rows=parseCSV(csvText);
        if(rows.length<2) throw new Error("No data rows found");

        allData = rows.slice(1)
          .filter(r=>r.length>=8 && r[1] && r[1].trim()!=="")
          .map(row=>({
            no:row[0].replace(/^"|"$/g,""),
            studentCode:row[1].replace(/^"|"$/g,""),
            studentName:row[2].replace(/^"|"$/g,""),
            class:row[3].replace(/^"|"$/g,""),
            sikapKehidupan:row[4].replace(/^"|"$/g,""),
            sikapSpiritual:row[5].replace(/^"|"$/g,""),
            sikapSosial:row[6].replace(/^"|"$/g,""),
            keterangan:row[7]?row[7].replace(/^"|"$/g,""):"-"
          }));

        renderTable(allData);
        fillDropdowns(allData);
        updateStatistics(allData);
        updateLastUpdate();
      }catch(e){
        console.error("Error loading data:", e);
        tableBody.innerHTML=`<tr><td colspan="8" class="error-cell"><i class="fas fa-exclamation-circle"></i>Gagal memuat data: ${e.message}. Pastikan sheet dipublikasikan.</td></tr>`;
      }
    }

    function renderTable(data){
      tableBody.innerHTML="";
      if(data.length===0){
        tableBody.innerHTML=`<tr><td colspan="8" class="no-data">Tidak ada data</td></tr>`;
        return;
      }
      data.forEach(item=>{
        const tr=document.createElement("tr");
        tr.classList.add(`kelas-${item.class.replace(/\W/g,'')}`);
        tr.innerHTML=`
          <td>${item.no||'-'}</td>
          <td>${item.studentCode||'-'}</td>
          <td>${item.studentName||'-'}</td>
          <td><span class="class-badge">${item.class||'-'}</span></td>
          <td class="attitude sikap-kehidupan" data-type="kehidupan" data-numbers="${item.sikapKehidupan}" data-student="${item.studentName}" data-class="${item.class}">${formatAttitude(item.sikapKehidupan,'kehidupan')}</td>
          <td class="attitude sikap-spiritual" data-type="spiritual" data-numbers="${item.sikapSpiritual}" data-student="${item.studentName}" data-class="${item.class}">${formatAttitude(item.sikapSpiritual,'spiritual')}</td>
          <td class="attitude sikap-sosial" data-type="sosial" data-numbers="${item.sikapSosial}" data-student="${item.studentName}" data-class="${item.class}">${formatAttitude(item.sikapSosial,'sosial')}</td>
          <td>${item.keterangan||'-'}</td>
        `;
        tableBody.appendChild(tr);
      });

      document.querySelectorAll('td.attitude').forEach(cell=>{
        cell.addEventListener('click',()=>{
          const numbers=cell.getAttribute('data-numbers');
          const type=cell.getAttribute('data-type');
          const studentName=cell.getAttribute('data-student');
          const className=cell.getAttribute('data-class');
          showModal(numbers,type,studentName,className);
        });
      });
    }

    function fillDropdowns(data){
      const classSet=new Set(data.map(item=>item.class).filter(Boolean));
      filterClass.innerHTML='<option value="">Semua Kelas</option>';
      Array.from(classSet).sort().forEach(item=>{
        const option=document.createElement("option");
        option.value=item; option.textContent=item;
        filterClass.appendChild(option);
      });
    }

    function updateStatistics(data){
      const totalAtt=data.reduce((sum,item)=>{
        const kehidupan=item.sikapKehidupan.split(',').filter(n=>n.trim() && n!=='-').length;
        const spiritual=item.sikapSpiritual.split(',').filter(n=>n.trim() && n!=='-').length;
        const sosial=item.sikapSosial.split(',').filter(n=>n.trim() && n!=='-').length;
        return sum+kehidupan+spiritual+sosial;
      },0);
      totalStudents.textContent=data.length;
      totalAttitudes.textContent=totalAtt;
    }

    function updateLastUpdate(){
      const now=new Date();
      lastUpdate.textContent=now.toLocaleString('id-ID',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});
    }

    function filterTable(){
      let filtered=[...allData];
      const classVal=(filterClass.value||"").toLowerCase();
      if(classVal){ filtered=filtered.filter(item=>(item.class||"").toLowerCase()===classVal) }
      renderTable(filtered);
      updateStatistics(filtered);
    }

    filterClass.addEventListener("change", filterTable);
    resetBtn.addEventListener("click", ()=>{
      filterClass.value="";
      renderTable(allData);
      updateStatistics(allData);
    });

    toggleLegend.addEventListener("click", ()=>{
      legendContent.classList.toggle("active");
      toggleLegend.innerHTML = legendContent.classList.contains("active")
        ? `<i class="fas fa-info-circle"></i> Sembunyikan Keterangan Butir Sikap`
        : `<i class="fas fa-info-circle"></i> Lihat Keterangan Butir Sikap`;
    });

    document.getElementById("modalClose").addEventListener("click", ()=>{attitudeModal.style.display='none'});
    attitudeModal.addEventListener("click",(e)=>{ if(e.target===attitudeModal){attitudeModal.style.display='none'} });

    loadData();
  </script>
</body>
</html>
